// Generated by CoffeeScript 1.11.1
var stream;

module.exports = {
  ssh: null,
  handler: function(options) {
    if (options.argument != null) {
      if (options.enabled == null) {
        options.enabled = options.argument;
      }
    }
    if (options.enabled == null) {
      options.enabled = true;
    }
    if (options.stream == null) {
      options.stream = process.stdout;
    }
    if (options.end == null) {
      options.end = false;
    }
    if (options.separator == null) {
      options.separator = ' # ';
    }
    if (options.depth == null) {
      options.depth = false;
    }
    return this.call(options, stream, {
      serializer: {
        'diff': null,
        'end': function() {
          return "FINISH\n";
        },
        'error': function(err) {
          return "ERROR";
        },
        'header': function(log) {
          var host;
          if (!options.enabled) {
            return;
          }
          host = options.ssh ? options.ssh.config.host : 'localhost';
          if (options.depth && options.depth < log.headers.length) {
            return;
          }
          return host + "  " + (log.headers.join(options.separator));
        },
        "handled": function(log) {
          return "\n";
        },
        'stdin': null,
        'stderr': null,
        'stdout': null,
        'text': null
      }
    });
  }
};

stream = require('./stream');
