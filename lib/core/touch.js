// Generated by CoffeeScript 1.10.0
var fs;

module.exports = function(options, callback) {
  options.log({
    message: "Calling touch",
    level: 'WARN',
    module: 'mecano/lib/touch'
  });
  if (options.argument != null) {
    options.destination = options.argument;
  }
  if (!options.destination) {
    return callback(new Error("Missing destination: " + options.destination));
  }
  options.log({
    message: "Check if destination exists \"" + options.destination + "\"",
    level: 'DEBUG',
    module: 'mecano/lib/touch'
  });
  return fs.exists(options.ssh, options.destination, (function(_this) {
    return function(err, exists) {
      if (err) {
        return callback(err);
      }
      if (exists) {
        return callback();
      }
      options.log({
        message: "Destination does not exists",
        level: 'INFO',
        module: 'mecano/lib/touch'
      });
      _this.write({
        content: '',
        destination: options.destination
      });
      return _this.then(callback);
    };
  })(this));
};

fs = require('ssh2-fs');
