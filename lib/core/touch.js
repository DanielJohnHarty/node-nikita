// Generated by CoffeeScript 1.10.0
var fs;

module.exports = function(options) {
  options.log({
    message: "Entering touch",
    level: 'DEBUG',
    module: 'mecano/lib/touch'
  });
  if (options.argument != null) {
    options.target = options.argument;
  }
  if (!options.target) {
    throw Error("Missing target: " + options.target);
  }
  this.call({
    shy: true
  }, function(_, callback) {
    options.log({
      message: "Check if target exists \"" + options.target + "\"",
      level: 'DEBUG',
      module: 'mecano/lib/touch'
    });
    return fs.exists(options.ssh, options.target, function(err, exists) {
      if (!err && !exists) {
        options.log({
          message: "Destination does not exists",
          level: 'INFO',
          module: 'mecano/lib/touch'
        });
      }
      return callback(err, exists);
    });
  });
  return this.write({
    content: '',
    target: options.target,
    unless: this.status(),
    mode: options.mode,
    uid: options.uid,
    gid: options.gid
  });
};

fs = require('ssh2-fs');
