// Generated by CoffeeScript 1.10.0
var context, registry;

module.exports = new Proxy((function() {
  return context.apply(null, arguments);
}), {
  get: function(target, name) {
    var builder, ctx, proxy, tree;
    ctx = context();
    tree = [];
    tree.push(name);
    builder = function() {
      var a;
      if (name === 'register' || name === 'registered' || name === 'unregister') {
        return registry[name].apply(registry, arguments);
      }
      a = ctx[tree.shift()];
      if (typeof a !== 'function') {
        return a;
      }
      while (name = tree.shift()) {
        a[name];
      }
      return a.apply(ctx, arguments);
    };
    proxy = new Proxy(builder, {
      get: function(target, name) {
        tree.push(name);
        return proxy;
      }
    });
    return proxy;
  }
});

context = require('./context');

registry = require('./registry');
