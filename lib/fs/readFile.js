// Generated by CoffeeScript 2.1.1
// # `nikita.fs.readFile(options, callback)`

// ## Source Code
module.exports = {
  status: false,
  handler: function(options, callback) {
    var ssh;
    options.log({
      message: "Entering fs.readFile",
      level: 'DEBUG',
      module: 'nikita/lib/fs/readFile'
    });
    ssh = this.ssh(options.ssh);
    return this.system.execute({
      cmd: `[ ! -e '${options.target}' ] && exit 2\n[ -d '${options.target}' ] && exit 3\ncat ${options.target}`,
      sudo: options.sudo,
      bash: options.bash,
      arch_chroot: options.arch_chroot
    }, function(err, status, stdout, stderr) {
      if ((err != null ? err.code : void 0) === 2) {
        err = Error(`ENOENT: no such file or directory, open '${options.target}'`);
        err.errno = -2;
        err.code = 'ENOENT';
        err.syscall = 'open';
        err.path = options.target;
      }
      if ((err != null ? err.code : void 0) === 3) {
        err = Error('EISDIR: illegal operation on a directory, read');
        err.errno = -21;
        err.code = 'EISDIR';
        err.syscall = 'read';
      }
      if (!options.encoding) {
        stdout = new Buffer(stdout, 'utf8');
      }
      return callback(err, stdout);
    });
  }
};
