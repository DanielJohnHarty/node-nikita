// Generated by CoffeeScript 1.10.0
var docker, docker_status, util;

module.exports = function(options, callback) {
  var cmd;
  if (options.container == null) {
    return callback(Error('Missing container parameter'));
  }
  cmd = ' stop ';
  if (options.timeout != null) {
    cmd += "-t " + options.timeout + " ";
  }
  cmd += options.container;
  return this.docker_status(options, function(err, is_running) {
    if (!is_running) {
      options.log({
        message: "Container already stopped " + options.container + " (Skipping)",
        level: 'INFO',
        module: 'mecano/lib/docker/start'
      });
    }
    if (err || !is_running) {
      return callback(err, is_running);
    }
    options.log({
      message: "Stopping container " + options.container,
      level: 'INFO',
      module: 'mecano/lib/docker/stop'
    });
    return this.execute({
      cmd: docker.wrap(options, cmd)
    }, function(err, executed, stdout, stderr) {
      return callback(err, executed, stdout, stderr);
    });
  });
};

docker_status = require('./status');

docker = require('../misc/docker');

util = require('util');
