// Generated by CoffeeScript 1.10.0
var mecano;

mecano = require('..');

module.exports = function(cmd, options, callback) {
  var machine;
  machine = options.machine != null ? options.machine : options.machine = '--';
  return mecano.execute({
    ssh: options.ssh,
    cwd: options.cwd,
    stdout: process.stdout,
    cmd: "export SHELL=/bin/bash\nexport PATH=/opt/local/bin/:/opt/local/sbin/:/usr/local/bin/:/usr/local/sbin/:$PATH\nbin_boot2docker=$(command -v boot2docker)\nbin_docker=$(command -v docker)\nbin_machine=$(command -v docker-machine)\nif [ -f $bin_machine ];\n  if [ \"" + machine + "\" = \"--\" ];then exit 5;fi\n  then\n    eval $(${bin_machine} env " + machine + ") && $bin_docker  " + cmd + "\nelif [ -f $bin_boot2docker ];\n  then\n    eval $(${bin_boot2docker} shellinit) && $bin_docker  " + cmd + "\nelse\n  $bin_docker  " + cmd + "\nfi"
  }, function(err, executed, stdout, stderr) {
    if (err) {
      if (err.code === 5) {
        return callback(Error('Missing machine name as options'));
      }
      return callback(err);
    }
    return callback(err, executed, stdout, stderr);
  });
};
