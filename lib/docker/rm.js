// Generated by CoffeeScript 1.10.0
var docker, util;

module.exports = function(options, callback) {
  var cmd, i, len, opt, ref;
  if (options.container == null) {
    return callback(Error('Missing container parameter'));
  }
  cmd = ' rm ';
  ref = ['link', 'volumes', 'force'];
  for (i = 0, len = ref.length; i < len; i++) {
    opt = ref[i];
    if (options[opt]) {
      cmd += "-" + (opt.charAt(0)) + " ";
    }
  }
  cmd += options.container;
  return this.execute({
    cmd: docker.wrap(options, " ps | grep '" + options.container + "' "),
    code_skipped: 1
  }, (function(_this) {
    return function(err, executed, stdout, stderr) {
      if (executed && !options.force) {
        return callback(Error('Container must be stopped to be removed without force', null));
      }
      _this.execute({
        cmd: docker.wrap(options, " ps -a | grep '" + options.container + "' "),
        code_skipped: 1
      });
      return _this.execute({
        cmd: docker.wrap(options, cmd),
        "if": function() {
          return this.status(-1);
        }
      }, function(err, executed, stdout, stderr) {
        return callback(err, executed, stdout, stderr);
      });
    };
  })(this));
};

docker = require('../misc/docker');

util = require('util');
