// Generated by CoffeeScript 1.8.0
var each, fs, misc, wrap;

module.exports = function(goptions, options, callback) {
  return wrap(arguments, function(options, next) {
    var modified;
    if (typeof options === 'string') {
      options = {
        source: options
      };
    }
    if (options.source == null) {
      options.source = options.destination;
    }
    if (options.source == null) {
      return next(new Error("Missing source"));
    }
    modified = false;
    if (options.ssh) {
      if (typeof options.log === "function") {
        options.log("Remove " + options.source);
      }
      return fs.exists(options.ssh, options.source, function(err, exists) {
        if (err) {
          return next(err);
        }
        if (exists) {
          modified = true;
        }
        return misc.file.remove(options.ssh, options.source, function(err) {
          return next(err, modified);
        });
      });
    } else {
      return each().files(options.source).on('item', function(file, next) {
        modified = true;
        if (typeof options.log === "function") {
          options.log("Remove " + file);
        }
        return misc.file.remove(options.ssh, file, next);
      }).on('both', function(err) {
        return next(err, modified);
      });
    }
  });
};

fs = require('ssh2-fs');

each = require('each');

misc = require('./misc');

wrap = require('./misc/wrap');
