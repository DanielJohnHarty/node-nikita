// Generated by CoffeeScript 1.8.0
var fs, wrap, write;

module.exports = function(goptions, options, callback) {
  return wrap(arguments, function(options, next) {
    var destination, mode, ssh;
    ssh = options.ssh, destination = options.destination, mode = options.mode;
    if (!destination) {
      return next(new Error("Missing destination: " + destination));
    }
    if (typeof options.log === "function") {
      options.log("Check if exists: " + destination);
    }
    return fs.exists(ssh, destination, function(err, exists) {
      if (err) {
        return next(err);
      }
      if (exists) {
        return next();
      }
      options.source = null;
      options.content = '';
      if (typeof options.log === "function") {
        options.log("Create a new empty file");
      }
      return write(options, function(err, written) {
        return next(err, written);
      });
    });
  });
};

fs = require('ssh2-fs');

wrap = require('./misc/wrap');

write = require('./write');
