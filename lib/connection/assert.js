// Generated by CoffeeScript 1.12.5
module.exports = {
  shy: true,
  handler: function(options) {
    var i, len, ref, results, server;
    options.log({
      message: "Entering connection.assert",
      level: 'DEBUG',
      module: 'nikita/lib/connection/assert'
    });
    if (options.servers == null) {
      options.servers = [];
    }
    if (options.server) {
      options.servers.push(options.server);
    }
    if (options.port && !options.host) {
      throw Error("Required Option: host is required if port is provided");
    }
    if (options.host && !options.port) {
      throw Error("Required Option: port is required if host is provided");
    }
    if (options.host) {
      options.servers.push({
        host: options.host,
        port: options.port
      });
    }
    ref = options.servers;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      server = ref[i];
      results.push(this.system.execute({
        cmd: "bash -c 'echo > /dev/tcp/" + server.host + "/" + server.port + "'"
      }, function(err) {
        if (err) {
          throw Error("Address not listening: \"" + server.host + ":" + server.port + "\"");
        }
      }));
    }
    return results;
  }
};
