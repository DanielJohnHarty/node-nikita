// Generated by CoffeeScript 1.10.0
module.exports = function(options) {
  options.log({
    message: "Entering service_start",
    level: 'DEBUG',
    module: 'mecano/lib/service/start'
  });
  if (typeof options.argument === 'string') {
    if (options.name == null) {
      options.name = options.argument;
    }
  }
  if (!options.name) {
    throw Error("Invalid Name: " + (JSON.stringify(options.name)));
  }
  options.log({
    message: "Start service " + options.name,
    level: 'INFO',
    module: 'mecano/lib/service/start'
  });
  this.service_status({
    name: options.name,
    code_started: options.code_started,
    code_stopped: options.code_stopped,
    shy: true
  });
  return this.execute({
    cmd: "service " + options.name + " start",
    unless: [
      function() {
        return this.status(-1);
      }, function() {
        return options.cache && options.store["mecano.service." + options.name + ".status"] === 'started';
      }
    ]
  }, function(err, started) {
    if (err) {
      throw err;
    }
    if (!err && options.cache) {
      return options.store["mecano.service." + options.name + ".status"] = 'started';
    }
  });
};
