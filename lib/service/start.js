// Generated by CoffeeScript 1.10.0
module.exports = function(options, callback) {
  if (!options.name) {
    return callback(new Error("Missing required option 'name'"));
  }
  return this.execute({
    cmd: "service " + options.name + " status",
    code_skipped: [3, 1],
    shy: true
  }, function(err, started) {
    if (err) {
      return callback(err);
    }
    return options.store["mecano.service." + options.name + ".status"] = started ? 'started' : 'stopped';
  }).execute({
    cmd: "service " + options.name + " start",
    not_if: function() {
      return options.store["mecano.service." + options.name + ".status"] === 'started';
    }
  }).then(callback);
};
