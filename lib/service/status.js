// Generated by CoffeeScript 1.12.4
module.exports = function(options) {
  options.log({
    message: "Entering service.status",
    level: 'DEBUG',
    module: 'nikita/lib/service/status'
  });
  if (typeof options.argument === 'string') {
    if (options.name == null) {
      options.name = options.argument;
    }
  }
  if (!options.name) {
    throw Error("Invalid Name: " + (JSON.stringify(options.name)));
  }
  options.log({
    message: "Status for service " + options.name,
    level: 'INFO',
    module: 'nikita/lib/service/status'
  });
  return this.call(function() {
    return this.system.execute({
      cmd: "ls /lib/systemd/system/*.service /etc/systemd/system/*.service /etc/rc.d/* /etc/init.d/* 2>/dev/null | grep -w \"" + options.name + "\" || exit 3\nif which systemctl >/dev/null 2>&1; then\n  systemctl status " + options.name + " || exit 3\nelif which service >/dev/null 2>&1; then\n  service " + options.name + " status || exit 3\nelse\n  echo \"Unsupported Loader\" >&2\n  exit 2\nfi",
      code: 0,
      code_skipped: 3,
      arch_chroot: options.arch_chroot,
      rootdir: options.rootdir
    }, function(err, status) {
      if ((err != null ? err.code : void 0) === 2) {
        throw Error("Unsupported Loader");
      }
      if (err) {
        return;
      }
      return options.log({
        message: "Status for " + options.name + " is " + (status ? 'started' : 'stoped'),
        level: 'INFO',
        module: 'nikita/lib/service/status'
      });
    });
  });
};
