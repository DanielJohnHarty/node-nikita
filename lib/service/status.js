// Generated by CoffeeScript 1.10.0
module.exports = function(options) {
  options.log({
    message: "Entering service_status",
    level: 'DEBUG',
    module: 'mecano/lib/service/status'
  });
  if (!options.name) {
    throw Error("Missing required option 'name'");
  }
  if (options.code_started == null) {
    options.code_started = 0;
  }
  if (options.code_stopped == null) {
    options.code_stopped = 3;
  }
  options.log({
    message: "Get status for " + options.name,
    level: 'DEBUG',
    module: 'mecano/lib/service/status'
  });
  return this.execute({
    cmd: "if ! chkconfig --list " + options.name + "; then exit 1; fi;\nservice " + options.name + " status || exit 3",
    code: options.code_started,
    code_skipped: options.code_stopped
  }, function(err, started) {
    var status;
    if (err) {
      throw Error("Invalid Service Name: " + options.name);
    }
    status = started ? 'started' : 'stopped';
    options.log({
      message: "Status for " + options.name + " is " + status,
      level: 'INFO',
      module: 'mecano/lib/service/status'
    });
    if (options.cache) {
      return options.store["mecano.service." + options.name + ".status"] = "" + status;
    }
  });
};
