// Generated by CoffeeScript 1.10.0
module.exports = function(options) {
  var cacheonly;
  options.log({
    message: "Entering service_remove",
    level: 'DEBUG',
    module: 'mecano/lib/service/remove'
  });
  if (!options.name) {
    throw Error("Missing required option 'name'");
  }
  cacheonly = options.cacheonly ? '-C' : '';
  return this.execute({
    cmd: "if ! rpm -qa --qf \"%{NAME}\n\" | grep -w '" + options.name + "'; then exit 3; fi;\nyum remove -y " + cacheonly + " '" + options.name + "'",
    code_skipped: 3
  }, function(err, removed) {
    if (err) {
      throw Error("Invalid Service Name: " + options.name);
    }
    return options.log(removed ? {
      message: "Service removed",
      level: 'WARN',
      module: 'mecano/lib/service/remove'
    } : {
      message: "Service already removed",
      level: 'INFO',
      module: 'mecano/lib/service/remove'
    });
  });
};
