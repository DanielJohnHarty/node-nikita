// Generated by CoffeeScript 1.10.0
var misc,
  slice = [].slice,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

module.exports.cmd = function() {
  var cmd, i, j, k, len, opt, options, opts, properties, v;
  opts = 2 <= arguments.length ? slice.call(arguments, 0, i = arguments.length - 1) : (i = 0, []), cmd = arguments[i++];
  if (cmd == null) {
    cmd = null;
  }
  properties = ['engine', 'admin_username', 'admin_password', 'username', 'password', 'host', 'database'];
  options = {};
  for (j = 0, len = opts.length; j < len; j++) {
    opt = opts[j];
    for (k in opt) {
      v = opt[k];
      if (indexOf.call(properties, k) < 0) {
        continue;
      }
      options[k] = v;
    }
  }
  options.engine = options.engine.toLowerCase();
  switch (options.engine) {
    case 'mysql':
      return ["mysql", "-h" + options.host, "-u" + (options.admin_username || options.username), "-p" + (options.admin_password || options.password), options.database ? "-D" + options.database : void 0, options.mysql_options ? "" + options.mysql_options : void 0, "-N -s -r", cmd ? "-e \"" + cmd + "\"" : void 0].join(' ');
    case 'postgres':
      return ["PGPASSWORD=" + (options.admin_password || options.password), "psql", "-h " + options.host, "-U " + (options.admin_username || options.username), options.database ? "-d " + options.database : void 0, options.postgres_options ? "" + options.postgres_options : void 0, "-tAq", cmd ? "-c \"" + cmd + "\"" : void 0].join(' ');
    default:
      throw Error("Unsupported engine: " + (JSON.stringify(options.engine)));
  }
};

misc = require('.');
