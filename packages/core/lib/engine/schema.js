// Generated by CoffeeScript 2.4.1
var Ajv;

Ajv = require('ajv');

module.exports = function() {
  var ajv;
  ajv = new Ajv({
    allErrors: true
  });
  return {
    add: function(name, schema) {
      if (!schema) {
        return;
      }
      return ajv.addSchema(schema, name);
    },
    validate: function(data, schema) {
      var valid, validate;
      // console.log data, schema
      validate = ajv.compile(schema);
      valid = validate(data);
      if (validate.errors) {
        return validate.errors.map(function(error) {
          return Error(ajv.errorsText([error]));
        });
      } else {
        return [];
      }
    },
    list: function() {
      return {
        schemas: ajv._schemas,
        refs: ajv._refs,
        fragments: ajv._fragments
      };
    }
  };
};
