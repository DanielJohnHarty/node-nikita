// Generated by CoffeeScript 2.4.1
// # `nikita.lxd.file.exists`

// Push files into containers.

// ## Options

// * `container` (string, required)
//   The name of the container.
// * `target` (string, required)
//   File destination in the form of "<path>".
//   overwrite the `target` option.

// ## Example

// ```js
// require('nikita')
// .lxd.file.exists({
//   container: "my_container"
// }, function(err, {status}) {
//   console.info( err ? err.message : 'The container was deleted')
// });

// ```

// ## Todo

// * Push recursive directories
// * Handle unmatched target permissions
// * Handle unmatched target ownerships
// * Detect name from lxd_target

// ## Source Code
var validate_container_name;

module.exports = {
  shy: true,
  handler: function({options}) {
    this.log({
      message: "Entering lxd.file.exists",
      level: 'DEBUG',
      module: '@nikitajs/lxd/lib/file/exists'
    });
    if (!options.container) {
      // Validation
      throw Error("Invalid Option: container is required");
    }
    validate_container_name(options.container);
    if (!options.target) {
      throw Error("Invalid Option: target is required");
    }
    return this.system.execute({
      cmd: `lxc exec ${options.container} -- stat ${options.target}`,
      code_skipped: 1
    });
  }
};

// ## Dependencies
validate_container_name = require('../misc/validate_container_name');
