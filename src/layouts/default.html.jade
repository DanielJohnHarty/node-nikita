- var scripts = getBlock('scripts')
- var styles = getBlock('styles')

//- Prettify Syntax Highlighting
- scripts.add(["/vendor/prettify.js"])
- styles.add(["/vendor/prettify.css"])

//- jQuery
- scripts.add(["/vendor/jquery/dist/jquery.js"])

//- Bootstrap
- scripts.add(["/vendor/components-bootstrap/js/bootstrap.js"])
- styles.add(["/vendor/components-bootstrap/css/bootstrap.css"])

//- Other Scripts
- scripts.add(["/vendor/log.js","/vendor/modernizr.js"])
- styles.add(["/vendor/ribbon.css"])

//- User
- styles.add(["/vendor/font-awesome-4.2.0/css/font-awesome.min.css"])
- styles.add(["/styles/style.css"])
- styles.add(["/styles/desert.css"])
- scripts.add(["/scripts/script.js"])

doctype html
html(lang="en")
  head

    // Meta
    meta(charset="utf-8")
    meta(http-equiv="content-type", content="text/html; charset=utf-8")

    //-
      Use the .htaccess and remove these lines to avoid edge case issues.
      More info: h5bp.com/i/378
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")

    //- Our site title and description
    title= getPreparedTitle()
    meta(name="description", content=getPreparedDescription())
    meta(name="keywords", content=getPreparedKeywords())
    meta(name="author", content=site.author || '')

    //- Output DocPad produced meta elements
    != getBlock('meta').toHTML()

    //- Mobile viewport optimized: h5bp.com/viewport
    meta(name="viewport", content="width=device-width")

    // Icons
    link(rel="shortcut icon", href="/ico/favicon.ico")
    link(rel="apple-touch-icon-precomposed", sizes="144x144", href="/ico/apple-touch-icon-144-precomposed.png")
    link(rel="apple-touch-icon-precomposed", sizes="114x114", href="/ico/apple-touch-icon-114-precomposed.png")
    link(rel="apple-touch-icon-precomposed", sizes="72x72", href="/ico/apple-touch-icon-72-precomposed.png")
    link(rel="apple-touch-icon-precomposed", href="/ico/apple-touch-icon-57-precomposed.png")
    //- Shims: IE6-8 support of HTML5 elements
    //if lt IE 9
      script(async src="http://html5shim.googlecode.com/svn/trunk/html5.js")

    // Styles
    != styles.toHTML()

  body#mecano
    nav.navbar.navbar-default.navbar-fixed-top(role="navigation")
      .right.ribbon-holder
        a.darkblue.ribbon(href="https://github.com/adaltas/node-mecano")
          span.text Fork me on GitHub
      .container
        .collapse.navbar-collapse
          - clazz = (document.url === '/') ? 'active' : null
          .navbar-header(class=clazz)
            a.navbar-brand(href="/") Mecano
          ul.nav.navbar-nav
            each page, url in site.sitemap
              - clazz = (document.url.split('/')[1] === url.split('/')[1]) ? 'active' : null
              li.dropdown(class=clazz)
                a(href=url, data-toggle="dropdown", property="dc:title")
                  = page.label
                  span.caret
                ul.dropdown-menu(role="menu")
                  if /^\/core/.test(url)
                    each doc in getCollection('core').toJSON()
                      - clazz = (document.url === doc.url) ? 'active' : null
                      li(role="sioc:Page", about=doc.url, class=clazz)
                        a(href=doc.url, role="menuitem")= doc.title
                  else if /^\/extra/.test(url)
                    each doc in getCollection('extra').toJSON()
                      - clazz = (document.url === doc.url) ? 'active' : null
                      li(role="sioc:Page", about=doc.url, class=clazz)
                        a(href=doc.url, role="menuitem")= doc.title
                  else
                    each childpage, childurl in page.children
                      li
                        a(href=childurl, property="dc:title")
                          = childpage.label + " "
                          if /^http/.test(childurl)
                            span.glyphicon.glyphicon-new-window
    if document.url === '/'
      #quick-core.container-fluid
        .container
          ul
            each doc, i in getCollection('core').toJSON()
              - clazz = (document.url === doc.url) ? 'active' : ''
              li(role="sioc:Page", about=doc.url, class=clazz)
                a(href=doc.url, role="menuitem")= doc.title
      #quick-extra.container-fluid
        .container
          ul
            each doc in getCollection('extra').toJSON()
              - clazz = (document.url === doc.url) ? 'active' : null
              li(role="sioc:Page", about=doc.url, class=clazz)
                a(href=doc.url, role="menuitem")= doc.title
    .container
      section#content.content!= content
      hr
      footer
        div= site.copyright
        div(style="font-style:italic; font-size: 12px") This website was last updated at #{site.date}


    // Scripts
    != scripts.toHTML()


